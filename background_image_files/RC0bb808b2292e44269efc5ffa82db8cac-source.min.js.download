// For license information, see `https://assets.adobedtm.com/1063865e0018/357c73f063e2/668dd3e63a9b/RC0bb808b2292e44269efc5ffa82db8cac-source.js`.
_satellite.__registerScript('https://assets.adobedtm.com/1063865e0018/357c73f063e2/668dd3e63a9b/RC0bb808b2292e44269efc5ffa82db8cac-source.min.js', "<script src=\"https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.0.0/core.min.js\"></script>\n<script src=\"https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.9-1/md5.js\"></script>\n<script>\n  function md5_hash(inputString){\n    var hash = CryptoJS.MD5(inputString);\n    return hash;\n  }\n</script>\n<script type=\"text/javascript\">\n  const _lang = ['en', 'fr', 'es', 'it', 'de', 'nl'].includes(window.hd.dl.site.language) ? window.hd.dl.site.language : 'en';\n  var domainKey='';\n  if(br_data && br_data.searchData && br_data.searchData.catalogs) domainKey=br_data.searchData.catalogs[0].name; else domainKey = \"harley_davidson_\" + _lang + \"_products_online\";\n  \n  //Bike Builder Page\n  \n  //console.log(hd.dl.page.name);\n  \n  var br_data = br_data || {};\n  br_data.acct_id = \"6720\"; \n  br_data.ptype = _satellite.getVar(\"Bloomreach_PageName\");\n  br_data.title = document.title; \n  br_data.domain_key = domainKey;\n  br_data.view_id = hd.dl.site.language + \"_\" + hd.dl.site.country;\n  br_data.user_id = hd.dl.user.id;\n  br_data.tms = \"\"; \n  br_data.currency = _satellite.getVar(\"currency_code\");\n  //br_data.test_data = \"true\";\n\n  //check Page Category\n  if(_satellite.getVar(\"Bloomreach_PageName\")==='product')\n    {\n      //console.log('----> product id check');\n      //console.log(hd.dl.product.id);\n      \n      br_data.prod_id = hd.dl.product.id;\n      br_data.prod_name = hd.dl.product.name;\n      br_data.sku = hd.dl.product.collection;\n      \n      //console.log(br_data.prod_id);\n    }\n  if(_satellite.getVar(\"Bloomreach_PageName\")==='category')\n    {\n      //console.log('----> category');\n      try{\n        var len = hd.dl.product.categoryCode.split(',').length\n        br_data.cat_id = hd.dl.product.categoryCode.split(',')[len-1]||hd.dl.product.categoryCode;\n        br_data.cat = \"hd-products|\" + hd.dl.product.categoryCode.replace(/,/g, '|');\n        }\n      catch(e){\n        br_data.cat_id = 'na';\n        br_data.cat = 'hd-products|na';\n      }\n    }\n  if(_satellite.getVar(\"Bloomreach_PageName\")==='search')\n    {\n      //console.log('----> search');\n      br_data.search_term = hd.dl.search.keyword || $('span.search-term').text();      \n    }\n  if(_satellite.getVar(\"Bloomreach_PageName\")==='content')\n    {\n      //Get value for content pages  \n      //console.log('----> content');\n      \n      br_data.catalogs = [ { name : \"content_\" + hd.dl.site.language } ];\n      br_data.item_id = md5_hash(document.location.pathname.replace('.html','').toString());\n      br_data.item_name = document.title;\n    }\n  if(_satellite.getVar(\"Bloomreach_PageName\")==='thematic')\n    {\n      //Get value for content pages  \n      //console.log('----> content');\n      \n      br_data.catalogs = [ { name : \"thematic_\" + hd.dl.site.language } ];\n      br_data.item_id = md5_hash(document.location.pathname.replace('.html','').toString());\n      br_data.item_name = document.title;\n    }\n  if(_satellite.getVar(\"Bloomreach_PageName\")==='other' && location.pathname.indexOf('order/confirmation')>0 && ((hd.dl.order.shippingOrder.entries) || (hd.dl.order.museumOrder.entries)))\n    {\n      \n      //var _products = hd.dl.order.entries || {}; ----Changed for manage Split Order\n      \n      var jsonObj = {}\n      jsonObj.items = [];\n      \n      if(hd.dl.order.shippingOrder.entries){\n        var _products = hd.dl.order.shippingOrder.entries || {};\n        $.each(_products, function (index, productItem) \n         {\n           if (productItem.sku && typeof productItem.sku === 'string' && productItem.sku !== '' && productItem.id && typeof productItem.id === 'string' && productItem.id !== '') \n               {\n                   var quantity = typeof productItem.quantity !== 'undefined' ? productItem.quantity : 0;\n                   var price = typeof productItem.unitPrice !== 'undefined' ? productItem.unitPrice : 0;\n                   if(price ===''){price=0.0001}\n                   var _id = md5_hash(productItem.id + '-' + hd.dl.site.language).toString();\n                   var _sku = productItem.sku;\n                   var _name = productItem.name;\n                   var prodInfo = {\"prod_id\":_id,\"sku\":_sku,\"name\":_name,quantity:quantity,\"price\":price}\n                   jsonObj.items.push(prodInfo)\n                }\n           }\n       );}\n      if(hd.dl.order.museumOrder.entries){\n        var _productsM = hd.dl.order.museumOrder.entries || {};\n        $.each(_productsM, function (index, productItem) \n             {\n             if (productItem.sku && typeof productItem.sku === 'string' && productItem.sku !== '' && productItem.id && typeof productItem.id === 'string' && productItem.id !== '') \n               {\n                   var quantity = typeof productItem.quantity !== 'undefined' ? productItem.quantity : 0;\n                   var price = typeof productItem.unitPrice !== 'undefined' ? productItem.unitPrice : 0;\n                   if(price ===''){price=0.0001}\n                   var _id = md5_hash(productItem.id + '-' + hd.dl.site.language).toString();\n                   var _sku = productItem.sku;\n                   var _name = productItem.name;\n                   var prodInfo = {\"prod_id\":_id,\"sku\":_sku,\"name\":_name,quantity:quantity,\"price\":price}\n                   jsonObj.items.push(prodInfo)\n                }\n             }\n         );}\n          \n      \n      if(hd.dl.order.shippingOrder.entries){\n        br_data.basket_value = hd.dl.order.shippingOrder.subtotal + hd.dl.order.shippingOrder.taxes;\n        br_data.order_id = hd.dl.order.shippingOrder.id;        \n      }\n      if(hd.dl.order.museumOrder.entries){\n        br_data.basket_value = hd.dl.order.museumOrder.subtotal + hd.dl.order.museumOrder.taxes;\n        br_data.order_id = hd.dl.order.museumOrder.id;        \n      }\n      if(hd.dl.order.shippingOrder.entries && hd.dl.order.museumOrder.entries){\n        br_data.basket_value = hd.dl.order.shippingOrder.subtotal + hd.dl.order.shippingOrder.taxes + hd.dl.order.museumOrder.subtotal + hd.dl.order.museumOrder.taxes;\n        br_data.order_id = hd.dl.order.shippingOrder.id + \"-\" + hd.dl.order.museumOrder.id;        \n      }\n      \n      var _basket = jsonObj\n      br_data.basket = _basket;\n      br_data.is_conversion = 1;\n      br_data.currency = hd.dl.order.currency;\n    }\n \n  (function() {\n  var brtrk = document.createElement('script');\n  brtrk.type = 'text/javascript';\n  brtrk.async = true;\n  brtrk.src = \"//cdn.brcdn.com/v1/br-trk-6720.js\";\n  var s = document.getElementsByTagName('script')[0];\n  s.parentNode.insertBefore(brtrk, s);\n    \n    //Bike Builder Testing\n    //console.log(brtrk);\n    console.log(br_data);\n  })();\n</script>");